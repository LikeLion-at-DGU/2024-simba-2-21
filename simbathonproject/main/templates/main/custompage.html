<!DOCTYPE html>
<html lang="ko">
<head>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/main/custom_page.css' %}">
    <link rel="icon" type="image/png" href="{% static 'assets/charcol.png' %}">
    <meta charset="UTF-8">
    <title>커스텀 뭐입을꽈</title>
</head>
<body>
    <div id="container" data-total-customs="{{ total_customs }}">
        <div class="button_container">    <!--버튼 컨테이너 -->
            <div class='left_box'><div id="logo_box">
                <a href='/custom/'><img src = "{% static 'assets/icons/varsity_logo.png' %}" id='logo'/></a>
            </div></div>
            <div id="normal_custom">      <!--일반/커스텀 선택 슬라이더-->
                <a href='/main'><button id="normal_btn">일반</button></a>
                <button id="custom_btn">커스텀</button>
            </div>
            <div class="tool_bar">          <!--툴바 (필터,초기화) -->
                <a href='/custom/'><i class="fa-solid fa-rotate-right" id="reset_btn"></i></a>
                <button id="filter_btn">       
                    <img src="{% static 'assets/icons/icon_filter_bk.png' %}" id="icon_filter_bk">
                    <img src="{% static 'assets/icons/icon_filter_blue.png' %}" id="icon_filter_blue">
                    <div id='filter_count'>{{ filter_apply_dep }}</div>
                </button>
            </div>
        </div>
        <div id="search_container" style="display: none;">
            <form id="search_form" method="get" action="/custom/">
                <input type="text" name="search" placeholder="Search by title" id="search_input">
                <button type="submit">검색</button>
            </form>
            <div id="suggestions" style="display: none;">
                <ul id="suggestions_list"></ul>
            </div>
        </div>
        <div id="main_container">
            <div id="sort_buttons">
                <a href="?sort=likes"><button id="sort_likes_btn">인기순</button></a>
                <a href="?sort=newest"><button id="sort_newest_btn">최신순</button></a>
            </div>
                <div class="slider__wrap">
                    <div class="slider__btn">
                        <a href="#" class="prev" title="이전">&lt;</a>
                    </div>
                    <div class="slider__img">
                        <div id="sliderInner" class="slider__inner">
                            {% for custom in customs %}
                                {% if not filter_apply_dep or custom.major in filter_apply_dep %}
                                    <div class="slider">
                                        <img src="{{ custom.image.url }}" class="test_img"/>
                                        <p align="center"><b>{{ custom.title }}</b></p>
                                        <button id="heart_btn" data-custom-id="{{ custom.id }}">
                                            <img src="{% if custom.id in liked_customs %}{% static 'assets/icons/heart_filled.png' %}{% else %}{% static 'assets/icons/heart.png' %}{% endif %}" id="icon_heart" />
                                            <p>{{ custom.like_count }}</p>
                                        </button>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="slider__btn" id="right_slider__btn">
                        <a href="#" class="next" title="다음">&gt;</a>
                    </div>   <!--우 Slider_btn 닫음-->
                </div>      <!--slider__wrap 닫음-->
                <a href='/design'>
                <div id='design_btn_container'>
                    <button id="design_btn">Design</button>
                </div>
                </a>
        </div>
    </div>
    <script src="{% static 'js/main/custompage.js' %}"></script>
    <script src="https://kit.fontawesome.com/e18eac0141.js" crossorigin="anonymous"></script>
</body>
</html>
